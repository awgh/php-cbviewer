2/4/2009: don't keep images on the disk for so long.  extract, display, and unlink in the same pageload.  imager.php and view_image.php are good for images that had to be extacted to disk (i.e., from RAR archives); ZipArchive::getStream and the GD function imagecreatefromstring may do the trick for ZIP archives; if not, imager and view_image will also work for zips.

1) get a list of files/directories
2) each one is clickable.  if a directory, descend the tree and re-list
	if a file, "view" file
3) extract a list of the files, and sort it 
	--remember the edge case of multi-page images
4) extract the images (all images?) into a temp directory which apache can read
5) generate the viewer page.  Click main image to advance, also forward &  back buttons.  optional: index, to pick a page directly
6) garbage collection - purge the cache when opening a new archive
7) optional - keep the list of titles in SQL?  
	Would make directory traversal unnecessary
	Could store additional information, including publish date and links
		to crossover issues
	Con: no moving or renaming the archives
	Con: need to insert files by hand (or find a way to auto-insert them)


to extract all files in a rar archive:

<?php

/* example by Erik Jenssen aka erix */

$filename = "foobar.rar";
$filepath = "/home/foo/bar/";

$rar_file = rar_open($filepath.$filename);
$list = rar_list($rar_file);
foreach($list as $file) {
    $entry = rar_entry_get($rar_file, $file->name);
    $entry->extract("."); // extract to the current dir
}
rar_close($rar_file);

?>


to extract all files in a zip archive:



Example #1 Extract all entries
<?php
$zip = new ZipArchive;
if ($zip->open('test.zip') === TRUE) {
    $zip->extractTo('/my/destination/dir/');
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
}
?>

Example #2 Extract only two entries
<?php
$zip = new ZipArchive;
$res = $zip->open('test_im.zip');
if ($res === TRUE) {
    $zip->extractTo('/my/destination/dir/', array('pear_item.gif', 'testfromfile.php'));
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
}
?>

